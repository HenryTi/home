webpackJsonp([0],{220:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=(n.n(r),n(28)),s=n(41),a=n(222),o=n(224),l=n(221),c=n(4),u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,o)}l((r=r.apply(e,t||[])).next())})};t.default=class extends r.Component{constructor(){super(...arguments),this.schema=new s.a({fields:[{type:"string",name:"username",placeholder:"\u7528\u6237\u540d",rules:["required","maxlength:100"]},{type:"password",name:"password",placeholder:"\u5bc6\u7801",rules:["required","maxlength:100"]}],onSumit:this.onLoginSubmit.bind(this)})}onLoginSubmit(e){return u(this,void 0,void 0,function*(){let t=yield l.a.login({user:e.username,pwd:e.password});void 0===t?(this.schema.clear(),this.schema.errors.push("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\uff01")):yield s.g.logined(t)})}click(){s.g.replace(r.createElement(a.a,{logo:this.props.logo}))}render(){let e=r.createElement("div",{className:"text-center"},r.createElement(i.a,{color:"link",style:{margin:"0px auto"},onClick:()=>s.g.push(r.createElement(a.a,{logo:this.props.logo}))},"\u5982\u679c\u6ca1\u6709\u8d26\u53f7\uff0c\u8bf7\u6ce8\u518c"));return r.createElement(s.e,{header:!1,footer:e},r.createElement("div",{style:{maxWidth:"400px",margin:"20px auto",padding:"0 30px"}},r.createElement("div",{className:"container",style:{display:"flex",position:"relative"}},r.createElement("img",{className:"App-logo",src:this.props.logo,style:{height:"60px",position:"absolute"}}),r.createElement("span",{style:{flex:1,fontSize:"x-large",alignSelf:"center",textAlign:"center",margin:"10px"}},"\u540c\u82b1")),r.createElement("div",{style:{height:"20px"}}),r.createElement(c.h,{formSchema:this.schema})),r.createElement("div",{className:"constainer"},r.createElement(i.a,{color:"link",block:!0,onClick:()=>s.g.push(r.createElement(o.a,null))},"\u5fd8\u8bb0\u5bc6\u7801")))}}},221:function(e,t,n){"use strict";var r=n(29),i=n(68);const s=new class extends r.a{login(e){return this.get("login",e).then(e=>{if(void 0!==e)return Object(i.a)(e)})}register(e){return this.post("register",e)}}("tv/user/");t.a=s},222:function(e,t,n){"use strict";var r=n(2),i=(n.n(r),n(41)),s=n(220),a=n(221),o=n(223),l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,o)}l((r=r.apply(e,t||[])).next())})};t.a=class extends r.Component{constructor(){super(...arguments),this.schema=new i.a({fields:[{type:"string",name:"user",placeholder:"\u7528\u6237\u540d",rules:["required","maxlength:100"]},{type:"password",name:"pwd",placeholder:"\u5bc6\u7801",rules:["required","maxlength:100"]},{type:"password",name:"rePwd",placeholder:"\u91cd\u590d\u5bc6\u7801",rules:["required","maxlength:100"]}],submitText:"\u6ce8\u518c\u65b0\u7528\u6237",onSumit:this.onLoginSubmit.bind(this)})}onLoginSubmit(e){return l(this,void 0,void 0,function*(){let t,{user:n,pwd:s,rePwd:l,country:c,mobile:u,email:h}=e;if(s!==l)return this.schema.errors.push("\u5bc6\u7801\u4e0d\u5bf9\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u5bc6\u7801\uff01"),this.schema.inputs.pwd.clear(),void this.schema.inputs.rePwd.clear();switch(yield a.a.register({nick:void 0,user:n,pwd:s,country:void 0,mobile:void 0,email:void 0})){default:throw"unknown return";case 0:return i.g.clear(),void i.g.show(r.createElement(o.a,{user:n,pwd:s}));case 1:t="\u7528\u6237\u540d "+n;break;case 2:t="\u624b\u673a\u53f7 +"+c+" "+u;break;case 3:t="\u7535\u5b50\u90ae\u4ef6 "+h}this.schema.errors.push(t+" \u5df2\u7ecf\u88ab\u6ce8\u518c\u8fc7\u4e86")})}click(){i.g.replace(r.createElement(s.default,{logo:this.props.logo}))}render(){return r.createElement(i.e,{header:"\u6ce8\u518c"},r.createElement("div",{style:{maxWidth:"400px",margin:"20px auto",padding:"0 30px"}},r.createElement("div",{className:"container",style:{display:"flex",position:"relative"}},r.createElement("img",{className:"App-logo",src:this.props.logo,style:{height:"60px",position:"absolute"}}),r.createElement("span",{style:{flex:1,fontSize:"x-large",alignSelf:"center",textAlign:"center",margin:"10px"}},"\u540c\u82b1")),r.createElement("div",{style:{height:"20px"}}),r.createElement(i.f,{formSchema:this.schema})))}}},223:function(e,t,n){"use strict";var r=n(2),i=(n.n(r),n(28)),s=n(41),a=n(221),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,o)}l((r=r.apply(e,t||[])).next())})};t.a=class extends r.Component{failed(){}login(){const{user:e,pwd:t}=this.props;a.a.login({user:e,pwd:t}).then(e=>o(this,void 0,void 0,function*(){void 0!==e?yield s.g.logined(e):this.failed()}))}render(){const{user:e,pwd:t}=this.props;return r.createElement(s.e,{header:!1},r.createElement(i.d,{className:"entry-form"},r.createElement(i.h,null,r.createElement("span",{className:"info"},"\u7528\u6237 ",r.createElement("strong",null,e," ")," \u6ce8\u518c\u6210\u529f\uff01"),r.createElement(i.a,{color:"success",block:!0,onClick:()=>this.login()},"\u76f4\u63a5\u767b\u5f55"))))}}},224:function(e,t,n){"use strict";var r=n(2),i=(n.n(r),n(41));t.a=class extends r.Component{render(){return r.createElement(i.e,{header:"\u5fd8\u8bb0\u5bc6\u7801"},"\u6b63\u5728\u8bbe\u8ba1\u4e2d...")}}}});
//# sourceMappingURL=0.4814b99f.chunk.js.map