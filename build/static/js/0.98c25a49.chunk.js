webpackJsonp([0],{319:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),r=(n.n(i),n(65)),a=n(323),s=n(327),c=n(321),o=n(322),l=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function s(e){try{o(i.next(e))}catch(e){a(e)}}function c(e){try{o(i.throw(e))}catch(e){a(e)}}function o(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,c)}o((i=i.apply(e,t||[])).next())})};const u=n(145),d=[{name:"username",type:"string",required:!0,maxLength:100},{name:"password",type:"string",required:!0,maxLength:100},{name:"login",type:"submit"}];t.default=class extends i.Component{constructor(){super(...arguments),this.res=Object(r.h)(o.a),this.uiSchema={items:{username:{placeholder:"\u7528\u6237\u540d",label:"\u7528\u6237"},password:{widget:"password",placeholder:"\u5bc6\u7801",label:"\u5bc6\u7801"},login:{widget:"button",className:"btn btn-primary btn-block mt-3",label:"\u767b\u5f55"}}},this.onSubmit=((e,t)=>l(this,void 0,void 0,function*(){let e=t.form.data,n=e.username,i=e.password;if(void 0===i)return"something wrong, pwd is undefined";let a=yield c.a.login({user:n,pwd:i,guest:r.g.guest});if(void 0===a)return"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\uff01";console.log("onLoginSubmit: user=%s pwd:%s",a.name,a.token),yield r.g.logined(a)}))}click(){r.g.replace(i.createElement(a.a,null))}render(){let e=i.createElement("div",{className:"text-center"},i.createElement("button",{className:"btn btn-link",color:"link",style:{margin:"0px auto"},onClick:()=>r.g.push(i.createElement(a.a,null))},"\u5982\u679c\u6ca1\u6709\u8d26\u53f7\uff0c\u8bf7\u6ce8\u518c")),t=!1,n="\u540c\u82b1";return!0===this.props.withBack&&(t="\u767b\u5f55",n="\u767b\u5f55\u7528\u6237"),i.createElement(r.d,{header:t,footer:e},i.createElement("div",{style:{maxWidth:"25em",margin:"3em auto",padding:"0 3em"}},i.createElement("div",{className:"container",style:{display:"flex",position:"relative"}},i.createElement("img",{className:"App-logo",src:u,style:{height:"60px",position:"absolute"}}),i.createElement("span",{style:{flex:1,fontSize:"x-large",alignSelf:"center",textAlign:"center",margin:"10px"}},n)),i.createElement("div",{style:{height:"20px"}}),i.createElement(r.b,{schema:d,uiSchema:this.uiSchema,onButtonClick:this.onSubmit,requiredFlag:!1}),i.createElement("button",{className:"btn btn-link btn-block",onClick:()=>r.g.push(i.createElement(s.a,null))},"\u5fd8\u8bb0\u5bc6\u7801")))}}},321:function(e,t,n){"use strict";var i=n(39),r=n(48),a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function s(e){try{o(i.next(e))}catch(e){a(e)}}function c(e){try{o(i.throw(e))}catch(e){a(e)}}function o(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,c)}o((i=i.apply(e,t||[])).next())})};const s=new class extends i.a{login(e){return a(this,void 0,void 0,function*(){let t=yield this.get("login",e);switch(typeof t){default:return;case"string":return Object(r.c)(t);case"object":let e=t.token,n=Object(r.c)(e),{nick:i,icon:a}=t;return i&&(n.nick=i),a&&(n.icon=a),n}})}register(e){return a(this,void 0,void 0,function*(){return yield this.post("register",e)})}}("tv/user/",void 0);t.a=s},322:function(e,t,n){"use strict";var i=n(325);n.d(t,"a",function(){return i.a});var r=n(326);n.d(t,"b",function(){return r.a})},323:function(e,t,n){"use strict";var i=n(6),r=(n.n(i),n(65)),a=n(319),s=n(321),c=n(324),o=n(144),l=(n.n(o),n(322)),u=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function s(e){try{o(i.next(e))}catch(e){a(e)}}function c(e){try{o(i.throw(e))}catch(e){a(e)}}function o(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,c)}o((i=i.apply(e,t||[])).next())})};const d=n(145),m=[{name:"user",type:"string",required:!0,maxLength:100},{name:"pwd",type:"string",required:!0,maxLength:100},{name:"rePwd",type:"string",required:!0,maxLength:100},{name:"register",type:"submit"}];t.a=class extends i.Component{constructor(){super(...arguments),this.res=Object(r.h)(l.b),this.uiSchema={items:{user:{placeholder:"\u7528\u6237\u540d",label:"\u7528\u6237\u540d"},pwd:{widget:"password",placeholder:"\u5bc6\u7801",label:"\u5bc6\u7801"},rePwd:{widget:"password",placeholder:"\u91cd\u590d\u5bc6\u7801",label:"\u91cd\u590d\u5bc6\u7801"},register:{widget:"button",className:"btn btn-primary btn-block mt-3",label:"\u6ce8\u518c\u65b0\u7528\u6237"}}}}onSubmit(e,t){return u(this,void 0,void 0,function*(){let e,n=t.form.data,{user:a,pwd:o,rePwd:l,country:u,mobile:d,email:m}=n;if(o!==l)return t.setValue("pwd",""),t.setValue("rePwd",""),"\u5bc6\u7801\u4e0d\u5bf9\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u5bc6\u7801\uff01";switch(yield s.a.register({nick:void 0,user:a,pwd:o,country:void 0,mobile:void 0,email:void 0})){default:throw"unknown return";case 0:return r.g.clear(),void r.g.show(i.createElement(c.a,{user:a,pwd:o}));case 1:e="\u7528\u6237\u540d "+a;break;case 2:e="\u624b\u673a\u53f7 +"+u+" "+d;break;case 3:e="\u7535\u5b50\u90ae\u4ef6 "+m}return e+" \u5df2\u7ecf\u88ab\u6ce8\u518c\u8fc7\u4e86"})}click(){r.g.replace(i.createElement(a.default,null))}render(){return i.createElement(r.d,{header:"\u6ce8\u518c"},i.createElement("div",{style:{maxWidth:"25em",margin:"3em auto",padding:"0 3em"}},i.createElement("div",{className:"container",style:{display:"flex",position:"relative"}},i.createElement("img",{className:"App-logo",src:d,style:{height:"60px",position:"absolute"}}),i.createElement("span",{style:{flex:1,fontSize:"x-large",alignSelf:"center",textAlign:"center",margin:"10px"}},"\u540c\u82b1")),i.createElement("div",{style:{height:"20px"}}),i.createElement(r.b,{schema:m,uiSchema:this.uiSchema,onButtonClick:this.onSubmit,requiredFlag:!1})))}}},324:function(e,t,n){"use strict";var i=n(6),r=(n.n(i),n(65)),a=n(321),s=n(144),c=(n.n(s),this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function s(e){try{o(i.next(e))}catch(e){a(e)}}function c(e){try{o(i.throw(e))}catch(e){a(e)}}function o(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,c)}o((i=i.apply(e,t||[])).next())})});t.a=class extends i.Component{failed(){}login(){const{user:e,pwd:t}=this.props;a.a.login({user:e,pwd:t,guest:r.g.guest}).then(e=>c(this,void 0,void 0,function*(){void 0!==e?yield r.g.logined(e):this.failed()}))}render(){const{user:e,pwd:t}=this.props;return i.createElement(r.d,{header:!1},i.createElement("div",{className:"container w-max-30c"},i.createElement("form",{className:"my-5"},i.createElement("div",{className:"py-5"},"\u7528\u6237 ",i.createElement("strong",{className:"text-primary"},e," ")," \u6ce8\u518c\u6210\u529f\uff01"),i.createElement("button",{className:"btn btn-success btn-block",onClick:()=>this.login()},"\u76f4\u63a5\u767b\u5f55"))))}}},325:function(e,t,n){"use strict";t.a={_:{a:"d"}}},326:function(e,t,n){"use strict";t.a={_:{a:"d"}}},327:function(e,t,n){"use strict";var i=n(6),r=(n.n(i),n(65));t.a=class extends i.Component{render(){return i.createElement(r.d,{header:"\u5fd8\u8bb0\u5bc6\u7801"},"\u6b63\u5728\u8bbe\u8ba1\u4e2d...")}}}});
//# sourceMappingURL=0.98c25a49.chunk.js.map